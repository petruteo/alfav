<!DOCTYPE html>
<html>

<head>


  <script src="https://www.gstatic.com/firebasejs/5.4.2/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyB0z3qF97l6Lbc42obthKgCjMlxbs5pAck",
      authDomain: "stock-3d70c.firebaseapp.com",
      databaseURL: "https://stock-3d70c.firebaseio.com",
      projectId: "stock-3d70c",
      storageBucket: "",
      messagingSenderId: "213865539064"
    };
    firebase.initializeApp(config);


    var database = firebase.database();

    function writeUserData(stock, dataArr) {
      firebase.database().ref('/' + stock).set({
        historicalData: dataArr
      });
    };

    firebase.database().ref('/stock/' + "VYn3M3Ttjwtm6uSJV8CE").once('value').then(function (snapshot) {
      var stockData = (snapshot.val() && snapshot.val().username) || 'Anonymous';
      console.log("din script head tag", stockData);

      // ...
    });

    writeUserData("AAPL", "historicalDataArray");

  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
    crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>

  <!-- Local JS -->
  <!-- <script src="correlation.js"></script> -->
  <script src="script.js"></script>

</head>

<body>

  <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
  <div id="stock_miniQuote_head" class="ajaxtrigger">
    <span id="stockSymbol"></span>&nbsp;(common stock)</div>

  <div id="stock_miniQuote">
    <div id="stockIndicator">
      <p>Retrieving stock information...</p>
    </div>


    <div class="stock_divider">

      <div id="stock_left">
        <span class="stock_label">Price</span>
        <br />
        <strong class="stock_strong">$
          <span id="stockAsk"></span>
        </strong>
        <br />
      </div>


      <div id="stock_right">
        <span class="stock_label">Change</span>
        <br />
        <strong class="stock_strong">
          <span id="stockChange"></span>
        </strong>
        <br />
        <strong class="stock_strong">
          <span id="stockChangePercent"></span>
        </strong>
        <br />
      </div>
      <div style="clear: both;"></div>


    </div>

    <div id="stock_body">

      <div id="stock_body_content">
        <span class="stock_label">Volume</span>
        <br />
        <strong class="stock_strong">
          <span id="stockVolume"></span>
        </strong>
        <br />
        <br />
        <span class="stock_label">Average Daily Volume</span>
        <br />
        <strong class="stock_strong">
          <span id="stockAvgVolume"></span>
        </strong>
        <br />
        <br />
        <span class="stock_label">52 Week Range</span>
        <br />
        <strong class="stock_strong">
          <span id="stockRange"></span>
        </strong>

      </div>

      <div style="clear: both;"></div>

    </div>

    <script>

      var database = firebase.database();
      function writeUserData(stock, dataArr) {
        firebase.database().ref('stocks/' + stock).set({
          historicalData: dataArr
        });
      };

      writeUserData("AAPL", "historicalDataArray");

      // function waitForElement() {
      //   if ((typeof stockValuesArray !== "undefined") && (typeof stockMarketArray !== "undefined")) {
      //     //variable exists, do what you want
      //     console.log("***Stock value:", stockValuesArray);
      //     console.log("***market index ETF = VOO:", stockMarketArray);
      //   }
      //   else {
      //     setTimeout(waitForElement, 1000);
      //   }
      // }

      // waitForElement();
      // console.log("ceva din scrpit tag");

    </script>
</body>

</html>